(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(51)},49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),u=n(28),c=n(7),i=n(8),l=n(15),s=n(16),d=n(19),m=n(17),h=n(20),E=n(12),p=n.n(E),f=function(){return{type:"LOGOUT"}};var v="RECEIVE_POSTS";function b(e){return{type:v,data:e,receivedAt:Date.now()}}var O=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).changeLogin=function(e){n.setState({login:e.target.value})},n.changePassword=function(e){n.setState({password:e.target.value})},n.logOut=function(){n.props.dispatch(f())},n.onClick=function(){var e,t;n.props.dispatch((e=n.state.login,t=n.state.password,function(n){var a=new FormData;return a.append("login",e),a.append("password",t),p()("http://dev.naviwfm.com/dev/rest/login",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"username="+e+"&password="+t}).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(e){return n(b(e))})})),n.setState({login:"",password:""})},n.state={login:"admin",password:"admin900"},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthorized,n=e.name,a=t?r.a.createElement("div",null,"Hello ",n,r.a.createElement("button",{onClick:this.logOut},"Logout")):r.a.createElement("div",{className:"login-form"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,n)),r.a.createElement("tr",null,r.a.createElement("td",null,"Login"),r.a.createElement("td",null,r.a.createElement("input",{value:this.state.login,onChange:this.changeLogin}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Password"),r.a.createElement("td",null,r.a.createElement("input",{type:"password",value:this.state.password,onChange:this.changePassword}))),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("button",{onClick:this.onClick},"Login"))))));return r.a.createElement("div",null,a)}}]),t}(a.Component),g=Object(c.connect)(function(e){return{isAuthorized:e.authorization.isAuthorized,name:e.authorization.name}},function(e,t){return{dispatch:e}})(O),w=n(52);var j=function(e){return r.a.createElement("li",null,r.a.createElement(w.a,{to:"/users"}," ",e.item.menuName))};var y=function(e){var t=e.menu.map(function(e){return r.a.createElement(j,{key:e.id,item:e})});return r.a.createElement("div",{className:"left-menu"},r.a.createElement("ul",null,t))},S=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement(w.a,{to:"/"},"Home"),r.a.createElement("button",{className:"logout-button",onClick:function(){e.dispatch(f())}},"LogOut"))},C=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthorized,n=e.menu,a=e.dispatch;return r.a.createElement("div",null,t?r.a.createElement("div",null,r.a.createElement(S,{dispatch:a}),r.a.createElement(y,{menu:n}),r.a.createElement("div",{className:"main-window"},this.props.children)):r.a.createElement(g,null))}}]),t}(a.Component),z=Object(c.connect)(function(e){return{isAuthorized:e.authorization.isAuthorized,menu:e.authorization.menu}},function(e){return{dispatch:e}})(C),A=n(10),R=n(5);function _(e){return function(t){return p()("http://dev.naviwfm.com/dev/rest/user/all",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"session_id="+e+"&use_filters=true&start_position=0"}).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(e){return t(function(e){return{type:I,data:e,receivedAt:Date.now()}}(e))})}}var I="RECEIVE_USERS";var L=function(e){return 0===e.userList.length&&e.dispatch(_(e.sessionId)),r.a.createElement("div",{className:"users"},r.a.createElement("table",{className:"user-list"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement("th",null,"\u0418\u043c\u044f"),r.a.createElement("th",null,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"))),r.a.createElement("tbody",null,e.userList.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.user_login),r.a.createElement("td",null,e.first_name),r.a.createElement("td",null,e.last_name))}))))},T=Object(c.connect)(function(e){return{userList:e.users.userList,sessionId:e.authorization.sessionId}},function(e,t){return{dispatch:e}})(L),k=n(13),N=n(11),U={isAuthorized:!1,name:"",sessionId:0,menu:[]};function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_AUTHORIZATION":return Object(N.a)({},e,{name:t.login,isAuthorized:!1});case"LOGOUT":return{isAuthorized:!1,name:""};case"RECEIVE_POSTS":return Object(N.a)({},e,{isAuthorized:void 0!==t.data.id,name:t.data.last_name,menu:t.data.userMenuItems,sessionId:t.data.session_id});default:return e}}var D={userList:[],isRequest:!1};function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_USERS_REQUEST":return Object(N.a)({},e,{isRequest:!0});case"RECEIVE_USERS":return Object(N.a)({},e,{userList:t.data});default:return e}}var x,F=n(31),H=(n(49),Object(R.b)()),M=Object(i.createStore)((x=H,Object(i.combineReducers)({router:Object(k.connectRouter)(x),authorization:P,users:V})),Object(F.composeWithDevTools)(Object(i.applyMiddleware)(Object(k.routerMiddleware)(H),o.a)));Object(u.render)(r.a.createElement(c.Provider,{store:M},r.a.createElement(k.ConnectedRouter,{history:H},r.a.createElement(z,null,r.a.createElement(A.a,{exact:!0,path:"/users",component:T})))),document.getElementById("root"))}},[[33,2,1]]]);
//# sourceMappingURL=main.e4ff55bb.chunk.js.map